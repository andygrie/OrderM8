<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <h1>{{title}}</h1>
    <form name="typeForm" ng-submit="insertType();">
        <div class="form-group">
            <label for="inputTypeName">Name</label>
            <input type="text" name="typeName" class="form-control" id="inputTypeName" placeholder="Enter Type name" ng-model="type.name" ng-class="{ 'invalid': typeForm.typeName.$invalid , 'valid': typeForm.typeName.$valid  }" required>
            <small class="errormessage form-text text-muted" ng-hide="typeForm.typeName.$valid">Product Type is required</small>
        </div>
        <div class="form-group">
            <label for="inputVat">Vat</label>
            <input type="number" name="vat" step="10" min="10" ng-pattern="/^[0-9]+0$/" ng-model="type.vat" class="form-control" id="inputVat" placeholder="Vat" ng-class="{ 'invalid': typeForm.vat.$invalid , 'valid': typeForm.vat.$valid  }" required>
            <small class="errormessage form-text text-muted" ng-hide="typeForm.vat.$valid">Enter a valid vat (e.g. 50)</small>
        </div>
        <button type="submit" ng-disabled="typeForm.$invalid" class="btn btn-success">Create</button>
        <small class="insertMessage form-text text-muted" ng-class="{'success': insertStatus = 'success' , 'error': insertStatus = 'error'}">{{insertMessage}}</small>
    </form>
    <section class="tableSection">
        <table>
            <tr>
                <th>idType</th>
                <th>Name</th>
                <th>Vat</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
            <tr ng-repeat="t in productTypes">
                <td>{{ t.idType }}</td>
                <td>{{ t.name }}</td>
                <td>{{ t.vat}}</td>
                <td ng-hide="editMode">
                    <button type="button" class="tableBtn btn btn-default" aria-label="Left Align" ng-click="setTmpType(t)" data-toggle="modal" data-target="#modalEdit">
                        <span class=" fa fa-pencil" aria-hidden="true"></span>
                    </button>
                </td>
                <td>
                    <button type="button" class="tableBtn btn btn-default" aria-label="Left Align" ng-click="setTmpType(t)" data-toggle="modal" data-target="#modalDelete">
                        <span class="fa fa-trash-o" aria-hidden="true"></span>
                    </button>
                </td>
            </tr>
        </table>
        <small class="updateDeleteMessage form-text text-muted" ng-class="{'success': updateDeleteStatus = 'success' , 'error': updateDeleteStatus = 'error'}">{{updateDeleteMessage}}</small>
    </section>
    <div class="modal fade" id="modalDelete" role="dialog" >
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Delete Product Type {{tmpType.idType}}</h4>
                </div>
                <div class="modal-body">
                    <p>Do you really want to delete Type {{tmpType.idType}}?
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="deleteTmpType()">Delete</button>
                </div>
            </div>
        </div>
    </div>
<form name="typeEditForm">
    <div class="modal fade" id="modalEdit" role="dialog" >
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Edit Product Type {{tmpType.idType}}</h4>
                </div>
                <div class="modal-body">
                   <div class="form-group">
                        <label for="inputEditTypeName">Name</label>
                        <input type="text" name="typeEditName" class="form-control" id="inputEditTypeName" placeholder="Enter Type name" ng-model="tmpType.name" ng-class="{ 'invalid': typeEditForm.typeEditName.$invalid , 'valid': typeEditForm.typeEditName.$valid  }" required>
                        <small class="errormessage form-text text-muted" ng-hide="typeEditForm.typeEditName.$valid">Product Type is required</small>
                    </div>
                    <div class="form-group">
                        <label for="inputVat">Vat</label>
                        <input type="number" name="editVat" step="10" min="10" ng-pattern="/^[0-9]+0$/" ng-model="tmpType.vat" class="form-control" id="inputVat" placeholder="Vat" ng-class="{ 'invalid': typeEditForm.editVat.$invalid , 'valid': typeEditForm.editVat.$valid  }" required>
                        <small class="errormessage form-text text-muted" ng-hide="typeEditForm.editVat.$valid">Enter a valid vat (e.g. 50)</small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success" data-dismiss="modal" ng-disabled="typeEditForm.$invalid" ng-click="updateTmpType()">Submit</button>
                </div>
            </div>
        </div>
    </div>
</form>
</body>
</html>