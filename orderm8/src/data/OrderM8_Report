* Thomas Leiter
* 5BHIFS - BSD

*__________MAIN__________*

REPORT  ZREP_ORDERM8_ORDER.
INCLUDE <SYMBOL>.

SELECTION-SCREEN SKIP 3.
SELECTION-SCREEN COMMENT 20(50) TEXT-000.
SELECTION-SCREEN ULINE.

SELECTION-SCREEN BEGIN OF BLOCK textBox WITH FRAME TITLE TEXT-002.
PARAMETERS:
    waiter TYPE C LENGTH 40 LOWER CASE DEFAULT '%',
    product TYPE C LENGTH 40 LOWER CASE DEFAULT '%'.
SELECTION-SCREEN END OF BLOCK textBox.

SELECTION-SCREEN BEGIN OF BLOCK radioGroup WITH FRAME TITLE TEXT-001.
PARAMETERS:
  lk_wat RADIOBUTTON GROUP rad2 DEFAULT 'X',
  lk_prod RADIOBUTTON GROUP rad2,
  lk_date RADIOBUTTON GROUP rad2.
SELECTION-SCREEN END OF BLOCK radioGroup.

PERFORM printOrders USING lk_wat lk_prod lk_date.


*__________Prints All Orders__________
FORM printOrders USING lk_wat lk_prod lk_date .
  DATA: wa_order TYPE zorderm8_order, sum_profit type ZDE_PROFIT.

  WRITE: 'Waiter:', waiter.
  Write:/'Product:', product.
  SKIP 4.


  IF lk_wat = 'X'.
    SELECT * FROM zorderm8_order INTO wa_order where waiter like waiter and product like product order by waiter.
      PERFORM PrintOrder USING wa_order.
    ENDSELECT.
  ENDIF.

  IF lk_prod = 'X'.
    SELECT * FROM zorderm8_order INTO wa_order where waiter like waiter and product like product order by product.
      PERFORM PrintOrder USING wa_order.
    ENDSELECT.
  ENDIF.

  IF lk_date = 'X'.
    SELECT * FROM zorderm8_order INTO wa_order where waiter like waiter and product like product order by orderdate.
      PERFORM PrintOrder USING wa_order.
    ENDSELECT.
  ENDIF.

  SELECT sum( profit ) into sum_profit from zorderm8_order where waiter like waiter and product like product.
  SKIP 2.
  FORMAT INTENSIFIED COLOR 5.
  Write: 'Total profit: ', sum_profit, ' EUR'.
ENDFORM.                    " printOrders


FORM PrintOrder  USING WA_ORDER TYPE zorderm8_order.
    WRITE: /(10) wa_order-id_order,
            (15) wa_order-orderdate,
            (25) wa_order-WAITER,
            wa_order-product,
                 wa_order-profit COLOR COL_GROUP INTENSIFIED ON,
                 wa_order-currkey,SYM_LEFT_HAND AS SYMBOL.

    IF wa_order-orderinfo <> ''.
      FORMAT INTENSIFIED COLOR 2.
      WRITE: /'               Additional Info: ', wa_order-orderinfo.
      FORMAT INTENSIFIED COLOR off.
    ENDIF.
ENDFORM.                    " PrintOrder